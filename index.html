<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SWF USA — Official U.S. Site for SWF Embroidery</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet" />

<!-- Leaflet for map -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
:root{
  /* Brand */
  --swf-red:#EC1C24;
  --swf-red-cta:#E01A22;
  /* UI */
  --ink:#0f172a; --muted:#64748b; --line:#e2e8f0; --bg:#f8fafc; --surface:#ffffff;
}
*{box-sizing:border-box} html,body{margin:0}
body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
a{color:inherit;text-decoration:none} img{max-width:100%;display:block}
.container{max-width:1200px;margin:0 auto;padding:0 16px}

/* Buttons & chips */
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.8rem 1.2rem;border-radius:14px;font-weight:700;cursor:pointer}
.btn-primary{background:var(--swf-red-cta);color:#fff}
.btn-outline{background:#fff;border:1px solid var(--line)}
/* chevron */
.js-view-series .chev{transition:transform .15s ease}
.js-view-series[aria-expanded="true"] .chev{transform:rotate(180deg)}
.pill{display:inline-block;border:1px solid #ffd5ea;background:#fff3f8;color:#8a1838;border-radius:999px;padding:.35rem .7rem;font-weight:700;font-size:.85rem}
.badge{display:inline-flex;align-items:center;gap:.4rem;padding:.3rem .6rem;border-radius:999px;font-weight:800;font-size:.75rem;letter-spacing:.06em;text-transform:uppercase}
.badge-flagship{background:#ffe4e8;color:#8a1838;border:1px solid #ffd5ea}
.badge-economy{background:#eef2ff;color:#3730a3;border:1px solid #e0e7ff}
/* KS Performance badge */
.badge-performance{background:#e7faf3;color:#065f46;border:1px solid #c7f0e3}

/* Headings & text */
.h1{font-size:clamp(34px,4.2vw,54px);font-weight:800;letter-spacing:-.02em;margin:10px 0 0}
.h2{font-size:30px;font-weight:800;margin:0}
.h3{font-size:20px;font-weight:700;margin:0 0 6px}
.p-muted{color:var(--muted)}
.section{padding:56px 0}

/* Layout */
.grid-2{display:grid;grid-template-columns:1.2fr 1fr;gap:32px}
@media (max-width:900px){.grid-2{grid-template-columns:1fr}}

/* =================== HEADER =================== */
.site-header{
  position:sticky; top:0; z-index:40;
  background:rgba(255,255,255,.86);
  backdrop-filter:saturate(180%) blur(8px);
  border-bottom:1px solid var(--line);
  transition: box-shadow .18s ease, border-color .18s ease;
}
.site-header.scrolled{ box-shadow:0 10px 30px rgba(2,6,23,.06); border-color:#e5e7eb; }
.header-row{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:18px; }
.brand img{ height:34px; display:block; }

/* Desktop nav */
.nav{ display:flex; align-items:center; gap:18px; }
.nav-link{ position:relative; padding:.6rem .2rem; font-weight:700; }
.nav-link:after{ content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px; background:var(--swf-red); transform:scaleX(0); transform-origin:left; transition:transform .18s ease; }
.nav-link:hover:after{ transform:scaleX(1); }
.nav-link[aria-current="true"]{ color:var(--swf-red); }
.nav-link[aria-current="true"]:after{ transform:scaleX(1); }

/* Primary nav CTA */
.nav-cta{ background:var(--swf-red-cta); color:#fff; padding:.65rem 1rem; border-radius:999px; box-shadow:0 6px 18px rgba(236,28,36,.18); }
.nav-cta:hover{ filter:brightness(1.03); }

/* Mobile */
.mobile-btn{ display:none; border:1px solid var(--line); background:#fff; border-radius:12px; }
@media (max-width:900px){ .nav{ display:none } .mobile-btn{ display:inline-flex } }
.mobile-panel{ border-top:1px solid var(--line); background:#fff; overflow:hidden; }
.mobile-grid{ display:grid; gap:10px; padding:12px 0; }
.m-link{ padding:.7rem 0; font-weight:700; }
.m-cta{ justify-content:center; }

/* Footer */
footer{margin-top:56px;background:#fff;border-top:1px solid var(--line)}
footer .cols{display:grid;grid-template-columns:repeat(4,1fr);gap:22px}
@media (max-width:900px){footer .cols{grid-template-columns:1fr 1fr}}
@media (max-width:600px){footer .cols{grid-template-columns:1fr}}
ul.clean{margin:.5rem 0 0 1.25rem;color:var(--muted);line-height:1.55}

/* Horizontal cards */
.hcards{display:grid;gap:16px;margin-top:16px}
.hcard{display:grid;grid-template-columns:360px 1fr;gap:18px;align-items:stretch;border:1px solid var(--line);background:var(--surface);border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.06);overflow:hidden}
.hcard .media{
  min-height:220px;
  background:#fff;
  align-self:start;
}
.hcard .body{padding:16px}
.hcard .meta{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:4px 0 10px}
.hcard .cta-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
.hcard .heads{font-weight:700;color:#0f172a}
@media (max-width:900px){.hcard{grid-template-columns:1fr}.hcard .media{max-height:340px}}
.hcard .media img{display:block;width:100%;height:auto;object-fit:contain}

/* Mini gallery in cards */
.mini-gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
.mini-gallery .thumb{border:1px solid var(--line);border-radius:10px;overflow:hidden;height:70px;display:flex;align-items:center;justify-content:center;background:#fff}
.mini-gallery img{height:100%;width:auto;object-fit:cover}
@media (max-width:640px){.mini-gallery{grid-template-columns:repeat(2,1fr)}}

/* ===== Financing (embed + Charlie) ===== */
.fin-grid{display:grid;grid-template-columns:1fr 1.2fr;gap:24px}
@media (max-width:1000px){.fin-grid{grid-template-columns:1fr}}
.fin-card{position:relative;border:1px solid var(--line);background:var(--surface);border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.06);overflow:hidden}
.fin-body{padding:18px}
.fin-hero{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin:2px 0 10px;padding:10px;border:1px solid #ffd5ea;background:#fff5f7;border-radius:14px}
.fin-hero img{height:26px;width:auto;display:block}
.fin-hero .tag{font-weight:800;font-size:.75rem;letter-spacing:.06em;text-transform:uppercase;background:#ffe4e8;color:#8a1838;border:1px solid #ffd5ea;border-radius:999px;padding:.25rem .6rem}
.fin-trust{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 6px}
.fin-badge{display:inline-flex;align-items:center;gap:.45rem;border:1px solid var(--line);background:#fff;border-radius:999px;padding:.4rem .7rem;font-weight:700;font-size:.85rem}
.fin-badge svg{width:16px;height:16px;flex:0 0 auto}
.fin-steps{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:12px 0}
@media (max-width:800px){.fin-steps{grid-template-columns:1fr}}
.step{border:1px solid var(--line);border-radius:14px;padding:12px;background:#fff}
.step h4{margin:0 0 6px;font-size:16px}
.step p{margin:0;color:var(--muted);font-size:14px}
.fin-note{font-size:.9rem;color:var(--muted);margin-top:6px}
.fin-disclaimer{font-size:.8rem;color:var(--muted);margin-top:10px}
.embed-wrap{border-left:1px solid var(--line);background:#fff;border-radius:18px;overflow:hidden}
@media (max-width:1000px){.embed-wrap{border-left:none;border-top:1px solid var(--line)}}
.embed-head{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px;border-bottom:1px solid var(--line);background:#fff}
.embed-head h3{margin:0;font-size:18px}
.embed-body{padding:0}
.contact-card{display:flex;gap:14px;align-items:center;border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px;margin-top:14px}
.contact-card img{width:64px;height:64px;border-radius:50%;object-fit:cover}
.contact-card .meta{display:grid;gap:4px}
.contact-card .meta h4{margin:0;font-size:16px}
.contact-card .meta p{margin:0;color:var(--muted);font-size:14px}
.contact-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.contact-actions .btn{padding:.6rem .9rem;border-radius:12px;font-weight:700;font-size:.9rem}

/* ===== Series details (accordion panels) ===== */
.series-details{display:none;border-top:1px dashed var(--line);margin-top:12px;padding-top:12px}
.series-details.open{display:block}
.series-details .specs{display:grid;grid-template-columns:1.2fr 1fr;gap:16px}
@media (max-width: 900px){ .series-details .specs{grid-template-columns:1fr} }
.spec-card{border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px}
.spec-card h4{margin:0 0 6px;font-size:16px}
.spec-list{margin:.25rem 0 0 1.1rem;color:var(--muted);line-height:1.55}
.gallery-row{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
@media (max-width: 640px){.gallery-row{grid-template-columns:repeat(2,1fr)}}
.gallery-row .thumb{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff;height:120px;display:flex;align-items:center;justify-content:center}
.gallery-row img{width:100%;height:100%;object-fit:cover}
.video-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
@media (max-width: 900px){.video-grid{grid-template-columns:1fr}}
.video-grid iframe{width:100%;aspect-ratio:16/9;border:0;border-radius:12px;background:#000}
.specs-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width: 1000px){.specs-grid{grid-template-columns:1fr}}
.spec-card table{width:100%;border-collapse:collapse;font-size:14px}
.spec-card th,.spec-card td{border:1px solid var(--line);padding:8px;background:#fff;text-align:left}
.spec-card th{background:#f9fafb;width:38%}

/* Download cards + modal */
.dl-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width:1000px){.dl-cards{grid-template-columns:1fr}}
.dl-card{border:1px solid var(--line);background:#fff;border-radius:14px;overflow:hidden;display:flex;gap:12px;align-items:center;padding:12px;cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,.06);transition:transform .12s ease}
.dl-card:hover{transform:translateY(-2px)}
.dl-card .pdf-ic{width:36px;height:44px;border:1px solid var(--line);border-radius:6px;display:grid;place-items:center;font-weight:800;background:#fff5f5;color:var(--swf-red)}
.dl-card h5{margin:0;font-size:15px}
.dl-card p{margin:2px 0 0;color:var(--muted);font-size:13px}
.modal-backdrop{position:fixed;inset:0;background:rgba(15,23,42,.55);backdrop-filter:blur(2px);display:none;z-index:1000}
.modal-backdrop.open{display:block}
.modal{position:fixed;inset:4% 6%;background:#fff;border-radius:16px;overflow:hidden;display:none;z-index:1001;border:1px solid var(--line);box-shadow:0 25px 80px rgba(2,6,23,.25)}
@media (max-width:900px){.modal{inset:6% 4%}}
.modal.open{display:flex;flex-direction:column}
.modal-head{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 14px;border-bottom:1px solid var(--line);background:#fff}
.modal-head h3{margin:0;font-size:16px}
.modal-close{appearance:none;border:1px solid var(--line);background:#fff;border-radius:10px;padding:.4rem .65rem;font-weight:800;cursor:pointer}
.modal-body{flex:1;min-height:320px;background:#000}
.modal-body iframe{width:100%;height:100%;border:0;background:#000}

/* What's Included card */
.included { margin-top:12px }
.included .items { display:grid; grid-template-columns:1fr 1fr; gap:8px 14px; margin-top:6px }
@media (max-width:700px){ .included .items{ grid-template-columns:1fr } }
.included .item { display:flex; align-items:flex-start; gap:8px }
.included .dot { flex:0 0 auto; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; border:1px solid var(--line); background:#fff5f5; color:var(--swf-red); font-weight:800 }
.included small { color:var(--muted); display:block; margin-top:6px }

/* ===== Tabs ===== */
.tablist{ display:flex; gap:8px; align-items:flex-end; margin:0 0 12px; border-bottom:1px solid var(--line); flex-wrap:wrap; }
.tab{ appearance:none; border:1px solid var(--line); border-bottom:2px solid transparent; background:#fff; color:#000; padding:.55rem .9rem; border-radius:10px 10px 0 0; font-weight:800; cursor:pointer; }
.tab[aria-selected="true"]{ color:var(--swf-red); border-color:#ffd5da #ffd5da var(--swf-red); background:#fff5f6; position:relative; top:1px; }
.tabpanel{ display:none !important; }
.tabpanel.active{ display:block !important; }

/* ===== HERO ===== */
.hero--pro{
  position: relative;
  padding: 64px 0 56px;
  background:
    radial-gradient(1200px 420px at 8% -10%, rgba(236,28,36,.10), rgba(236,28,36,0) 60%),
    linear-gradient(#fff 0%, #fff 58%, var(--bg) 100%);
  border-bottom: 1px solid var(--line);
  overflow: hidden;
}
.hero--pro:before{
  content:""; position:absolute; inset:0;
  background-image: linear-gradient(rgba(2,6,23,.035) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(2,6,23,.035) 1px, transparent 1px);
  background-size: 20px 20px;
  mask-image: radial-gradient(70% 50% at 10% 0%, #000 30%, transparent 70%);
  pointer-events:none;
}
.hero__wm{ position:absolute; inset:0 50% 0 0; background: url("https://cdn.shopify.com/s/files/1/1236/6284/files/swfnobg.png?v=1759258611") no-repeat; background-size: 560px auto; background-position: -60px -40px; opacity:.045; mix-blend-mode:multiply; pointer-events:none; }
.hero__stage{ position: relative; border-radius: 22px; overflow: hidden; background: #fff; border:1px solid var(--line); box-shadow: 0 20px 50px rgba(2,6,23,.08); }
.hero__stage:after{ content:""; position:absolute; left:10%; right:10%; bottom:-24px; height:60px; background: radial-gradient(40% 80% at 50% 0%, rgba(236,28,36,.18), transparent 70%); filter: blur(18px); z-index:0; }
.brand-plaque{ position:absolute; top:12px; right:12px; z-index:2; display:flex; align-items:center; gap:8px; background:#fff; border:1px solid var(--line); border-radius:999px; padding:.35rem .6rem; box-shadow:0 8px 18px rgba(2,6,23,.08); }
.brand-plaque img{ height:18px; width:auto; display:block; }
.brand-plaque span{ font-size:.78rem; font-weight:800; letter-spacing:.04em; color:var(--muted); text-transform:uppercase; }
.hero__media{ position:relative; z-index:1; }
.hero__media img{ width:100%; height:auto; display:block; object-fit:contain; background:#fff; }
.hero__chips{ display:flex; gap:10px; flex-wrap:wrap; margin:14px 0 4px; }
.chip{ display:inline-flex; align-items:center; gap:.45rem; border:1px solid var(--line); background:#fff; border-radius:999px; padding:.4rem .7rem; font-weight:700; font-size:.85rem }
.chip svg{ width:16px; height:16px; flex:0 0 auto }
.hero__ctas{ display:flex; gap:12px; flex-wrap:wrap; margin-top:18px; }
.btn i{ font-style:normal; opacity:.7; }
@media (max-width:900px){
  .hero--pro{ padding-top:48px }
  .hero__wm{ background-size:360px auto; background-position:-50px -30px; opacity:.055 }
}
/* KS image padding */
#ks .media{ padding: 12px 18px; box-sizing: border-box; }
@media (max-width:900px){ #ks .media{ padding: 10px 14px; } }

/* ===== Dealer Locator ===== */
.locator-head{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:10px}
.locator-row{display:flex;flex-wrap:wrap;gap:8px}
.locator-row .field{display:flex;align-items:center;gap:6px;border:1px solid var(--line);background:#fff;border-radius:12px;padding:.5rem .6rem}
.locator-row input[type="text"]{border:0;outline:0;background:transparent;font:inherit;min-width:220px}
.locator-row select{border:0;outline:0;background:transparent;font:inherit}
.locator-row .btn{padding:.55rem .8rem;border-radius:10px}
.locator-actions{display:flex;gap:8px;flex-wrap:wrap}
.resultbar{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:4px 0 12px}
.resultbar small{color:var(--muted)}
.btn-clear{background:#fff;border:1px solid var(--line);border-radius:10px;padding:.45rem .7rem;font-weight:700;cursor:pointer}

.dealer-grid{display:grid;gap:12px}
.dealer-item{border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,.06)}
.dealer-item h3{margin:0 0 4px;font-size:18px}
.dealer-meta{display:flex;gap:8px;flex-wrap:wrap;color:var(--muted);font-size:14px}
.dealer-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.dealer-chip{display:inline-flex;gap:.4rem;align-items:center;border:1px solid var(--line);border-radius:999px;padding:.25rem .55rem;font-weight:700;font-size:.78rem;background:#fff}
.dealer-chip.single{background:#eefcf5;border-color:#d1fae5}
.dealer-chip.multi{background:#eef2ff;border-color:#e0e7ff}
.group-head{font-weight:800;letter-spacing:.02em;margin:12px 0 8px;color:#475569}
.empty-state{border:1px dashed var(--line);border-radius:14px;padding:18px;text-align:center;color:var(--muted)}
.badge-online{background:#f1f5f9;border:1px solid #e2e8f0;border-radius:8px;padding:.2rem .45rem;font-size:.72rem;font-weight:800}

/* Map pane */
.mapwrap{border:1px solid var(--line);background:#fff;border-radius:14px;overflow:hidden}
#dealerMap{height:420px;width:100%}
.map-hidden{display:none}

/* Sticky on mobile */
@media (max-width:760px){
  .locator-head{position:sticky;top:56px;background:#fff;z-index:10;padding:10px 0;border-bottom:1px solid var(--line)}
}

/* Small buttons inside cards */
.dealer-actions .btn{padding:.5rem .7rem;border-radius:10px;font-weight:700}
</style>
</head>
<body>

<!-- =================== HEADER =================== -->
<header class="site-header" id="siteHeader">
  <div class="container header-row">
    <a href="#" class="brand">
      <img src="https://cdn.shopify.com/s/files/1/1236/6284/files/swfnobg.png?v=1759258611" alt="SWF" />
    </a>

    <nav class="nav" aria-label="Main">
      <a class="nav-link" href="#series">Machines</a>
      <a class="nav-link" href="#financing">Financing</a>
      <a class="nav-link" href="#support">Support</a>
      <a class="nav-link" href="#locator">Dealer&nbsp;Locator</a>
      <a class="btn nav-cta" href="#locator">Find a Dealer</a>
    </nav>

    <button id="menuBtn" class="btn mobile-btn" aria-expanded="false" aria-controls="mobileMenu">
      Menu
    </button>
  </div>

  <div id="mobileMenu" class="mobile-panel" hidden>
    <div class="container mobile-grid">
      <a class="m-link" href="#series">Machines</a>
      <a class="m-link" href="#financing">Financing</a>
      <a class="m-link" href="#support">Support</a>
      <a class="m-link" href="#locator">Dealer Locator</a>
      <a class="btn nav-cta m-cta" href="#locator">Find a Dealer</a>
    </div>
  </div>
</header>

<main>
  <!-- =================== HERO =================== -->
  <section class="section hero--pro">
    <div class="hero__wm" aria-hidden="true"></div>
    <div class="container grid-2">
      <div>
        <div class="badge badge-flagship" style="margin-bottom:8px">Embroidery • Built for Hats</div>
        <h1 class="h1">SWF Embroidery<br>Machines</h1>

        <div class="hero__chips" aria-label="Key benefits">
          <span class="chip">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M3 12l9-6 9 6-9 6-9-6zM3 12v5l9 6 9-6v-5"/></svg>
            Built for hats
          </span>
          <span class="chip">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/></svg>
            1–8 heads
          </span>
          <span class="chip">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M4 4h16v16H4zM8 8h8v8H8z"/></svg>
            U.S. dealer network
          </span>
        </div>

        <p class="p-muted" style="margin-top:10px;max-width:62ch">
          Explore the KX, KS, KE, ES, MAS—and the Sunny 7-needle—reliable stitch quality, speed, and a cap system engineered for structured hats. Connect with authorized dealers, get support, and explore financing.
        </p>

        <div class="hero__ctas">
          <a class="btn btn-primary" href="#series">See Machines</a>
          <a class="btn btn-outline" href="#locator"><i>📍</i> Find a Dealer</a>
          <a class="btn btn-outline" href="#financing"><i>💳</i> Financing</a>
        </div>
      </div>

      <div class="hero__stage">
        <div class="brand-plaque" aria-hidden="true">
          <img src="https://cdn.shopify.com/s/files/1/1236/6284/files/swfnobg.png?v=1759258611" alt="">
          <span>Official U.S. Site</span>
        </div>
        <div class="hero__media">
          <picture>
            <source srcset="https://cdn.shopify.com/s/files/1/0878/0608/3384/files/KX_6_head.png?v=1759270180" type="image/png">
            <img src="https://cdn.shopify.com/s/files/1/0878/0608/3384/files/KX_6_head.png?v=1759270180"
                 alt="SWF KX 6-Head embroidery machine" loading="eager" width="1100" height="700">
          </picture>
        </div>
      </div>
    </div>
  </section>

  <!-- =================== SERIES (unchanged from your latest) =================== -->
  <!-- ... your series cards (KX, KS, KE, ES, MAS, Sunny) stay the same as in your last version ... -->
  <!-- (Omitted here for brevity since your request is focused on the Dealer Locator.
       Keep your existing series HTML from your current file.) -->

  <!-- WHY SWF -->
  <section class="section" style="background:#fff;border-top:1px solid var(--line);border-bottom:1px solid var(--line)">
    <div class="container" style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px">
      <div class="hcard" style="grid-template-columns:1fr"><div class="body"><h3 class="h3">Built for Hats</h3><p class="p-muted">Cap system engineered for structured hats with smooth stitch quality at speed.</p></div></div>
      <div class="hcard" style="grid-template-columns:1fr"><div class="body"><h3 class="h3">U.S. Dealer Network</h3><p class="p-muted">Local install, training, and service from authorized SWF dealers.</p></div></div>
      <div class="hcard" style="grid-template-columns:1fr"><div class="body"><h3 class="h3">7-Year Warranty</h3><p class="p-muted">Industry-leading coverage backed in the United States.</p></div></div>
      <div class="hcard" style="grid-template-columns:1fr"><div class="body"><h3 class="h3">Lifetime Support</h3><p class="p-muted">Manuals, training content, and real humans when you need them.</p></div></div>
    </div>
  </section>

  <!-- FINANCING (unchanged) -->
  <!-- ... keep your BYLD Finance block from the current file ... -->

  <!-- SUPPORT (unchanged) -->
  <!-- ... keep your Support & Resources section from the current file ... -->

  <!-- =============== DEALER LOCATOR (updated) =============== -->
  <section id="locator" class="section" style="padding:40px 0">
    <div class="container">
      <h2 class="h2" style="margin-bottom:8px">Find a Dealer</h2>

      <!-- Controls -->
      <div class="locator-head">
        <div class="locator-row">
          <div class="field" style="flex:1;min-width:260px">
            🔎 <input id="dealerSearch" type="text" placeholder="Search dealer, city, phone…" aria-label="Search dealers" />
          </div>
          <div class="field">
            Type:
            <select id="dealerType" aria-label="Filter by type">
              <option value="">All</option>
              <option value="online">Online</option>
              <option value="retail">Retail</option>
            </select>
          </div>
          <div class="field">
            Certification:
            <select id="dealerCert" aria-label="Filter by certification">
              <option value="">Any</option>
              <option value="single">Single Head</option>
              <option value="multi">Multi-Head</option>
            </select>
          </div>
          <div class="field">
            Sort:
            <select id="dealerSort" aria-label="Sort results">
              <option value="alpha">A → Z</option>
              <option value="nearest">Nearest</option>
            </select>
          </div>
        </div>
        <div class="locator-actions">
          <button id="useLocation" class="btn btn-outline" type="button">📍 Use my location</button>
          <button id="toggleMap" class="btn btn-outline" type="button" aria-pressed="false">🗺️ Show Map</button>
        </div>
        <div class="resultbar">
          <small><span id="dealerCount">0</span> result(s)</small>
          <button id="dealerClear" class="btn-clear" type="button">Clear filters</button>
        </div>
      </div>

      <!-- Map -->
      <div id="mapPane" class="mapwrap map-hidden" aria-hidden="true">
        <div id="dealerMap" role="region" aria-label="Dealer map"></div>
      </div>

      <!-- Results -->
      <div id="dealerGroups" class="dealer-grid" style="margin-top:12px"></div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section">
    <div class="container">
      <h2 class="h2">Contact</h2>
      <p class="p-muted">Email <a style="color:var(--swf-red)" href="mailto:contact@swf-usa.com">contact@swf-usa.com</a></p>
    </div>
  </section>
</main>

<!-- Footer -->
<footer>
  <div class="container cols" style="padding:22px 0">
    <div>
      <img src="https://cdn.shopify.com/s/files/1/1236/6284/files/swfnobg.png?v=1759258611" alt="SWF" style="height:30px;margin-bottom:8px" />
      <p class="p-muted" style="margin:0">Official U.S. site for SWF embroidery equipment and support.</p>
    </div>
    <div><h4 class="h3" style="margin:0 0 6px;font-size:16px">Explore</h4><div style="display:grid;gap:6px;font-size:15px">
      <a href="#series">Machines</a><a href="#financing">Financing</a><a href="#support">Support</a><a href="#locator">Dealer Locator</a>
    </div></div>
    <div><h4 class="h3" style="margin:0 0 6px;font-size:16px">Company</h4><div style="display:grid;gap:6px;font-size:15px">
      <a href="#contact">Contact</a><a href="#">Privacy</a>
    </div></div>
    <div><h4 class="h3" style="margin:0 0 6px;font-size:16px">Get Support</h4>
      <p class="p-muted" style="margin:0 0 8px">Questions about machines, parts, or service</p>
      <a class="btn btn-primary" href="https://stitch-it-support-site.web.app/supportForm" target="_blank" rel="noopener">Open Support Form</a>
    </div>
  </div>
  <div style="border-top:1px solid var(--line);text-align:center;padding:12px 0;font-size:13px;color:#64748b">
    © <span id="y"></span> SWF USA
  </div>
</footer>

<!-- PDF/WEB Modal (unchanged) -->
<div class="modal-backdrop" id="pdfBackdrop" hidden></div>
<div class="modal" id="pdfModal" role="dialog" aria-modal="true" aria-labelledby="pdfTitle" hidden>
  <div class="modal-head">
    <h3 id="pdfTitle">Brochure</h3>
    <button class="modal-close" id="pdfClose" aria-label="Close PDF viewer">✕</button>
  </div>
  <div class="modal-body"><iframe id="pdfFrame" title="Brochure / Page"></iframe></div>
</div>

<script>
/* Year */
document.getElementById('y').textContent = new Date().getFullYear();

/* Header behavior */
const header = document.getElementById('siteHeader');
const onScroll = () => header.classList.toggle('scrolled', window.scrollY > 6);
onScroll(); window.addEventListener('scroll', onScroll);

/* Mobile toggle */
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');
menuBtn?.addEventListener('click', () => {
  const open = !mobileMenu.hasAttribute('hidden');
  if (open){ mobileMenu.setAttribute('hidden',''); menuBtn.setAttribute('aria-expanded','false'); }
  else { mobileMenu.removeAttribute('hidden'); menuBtn.setAttribute('aria-expanded','true'); }
});

/* Active nav link */
const links = [...document.querySelectorAll('.nav-link')];
const targets = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
const io = new IntersectionObserver((entries)=>{
  const visible = entries.filter(e => e.isIntersecting).sort((a,b)=> a.boundingClientRect.top - b.boundingClientRect.top)[0];
  if(!visible) return;
  const id = '#'+visible.target.id;
  links.forEach(l => l.setAttribute('aria-current', l.getAttribute('href')===id ? 'true':'false'));
},{ rootMargin:'-40% 0px -55% 0px', threshold:[0,1] });
targets.forEach(sec => io.observe(sec));
links.forEach(a=>{
  a.addEventListener('click', e=>{
    const id = a.getAttribute('href'); const sec = document.querySelector(id);
    if(!sec) return; e.preventDefault(); sec.scrollIntoView({behavior:'smooth', block:'start'}); history.replaceState(null,'', id);
  });
});

/* Simple tabs (your existing tabs logic can remain here if you kept series) */

/* Modal (PDF / web) */
(function(){
  const openBtns = document.querySelectorAll('.js-open-pdf');
  const backdrop = document.getElementById('pdfBackdrop');
  const modal = document.getElementById('pdfModal');
  const frame = document.getElementById('pdfFrame');
  const titleEl = document.getElementById('pdfTitle');
  const closeBtn = document.getElementById('pdfClose');
  let lastFocus = null;

  function openModal(url, title){
    lastFocus = document.activeElement;
    titleEl.textContent = title || 'Brochure';
    frame.src = url;
    backdrop.hidden = false; modal.hidden = false;
    backdrop.classList.add('open'); modal.classList.add('open');
    closeBtn.focus(); document.documentElement.style.overflow = 'hidden';
  }
  function closeModal(){
    frame.src = 'about:blank';
    backdrop.classList.remove('open'); modal.classList.remove('open');
    backdrop.hidden = true; modal.hidden = true;
    document.documentElement.style.overflow = '';
    if(lastFocus) lastFocus.focus();
  }

  openBtns.forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      openModal(btn.getAttribute('data-pdf'), btn.getAttribute('data-title'));
    });
  });
  backdrop?.addEventListener('click', closeModal);
  closeBtn?.addEventListener('click', closeModal);
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !modal.hidden){ closeModal(); } });
})();
</script>

<script>
/* ================= Dealer Locator (ALL dealers have pins) ================= */

// City-center or store-level coordinates (easy to refine later)
const dealers = [
  // ========== ONLINE (now with pins) ==========
  {
    id:'kens-online',
    name:"Ken's Sewing Center — Online",
    website:'https://www.kenssewingcenter.com',
    phone:'877-536-7739',
    type:'online',
    certs:['single'],
    // Muscle Shoals, AL (city center)
    city:'Muscle Shoals', state:'AL', address:'Online Dealer (city center pin)',
    lat:34.7456, lng:-87.6675
  },
  {
    id:'topps-online',
    name:'Topps Vacuum & Sewing — Online',
    website:'https://www.toppsvacuumandsewing.com',
    phone:'800-280-4919',
    type:'online',
    certs:['single'],
    // Tampa, FL (neutral state hub for online pin)
    city:'Tampa', state:'FL', address:'Online Dealer (state hub pin)',
    lat:27.9506, lng:-82.4572
  },
  {
    id:'smp-online',
    name:'Sewing Machines Plus — Online',
    website:'https://www.sewingmachinesplus.com',
    phone:'800-408-5181',
    type:'online',
    certs:['single','multi'],
    // San Marcos, CA (their known retail base)
    city:'San Marcos', state:'CA', address:'Online Dealer (San Marcos base)',
    lat:33.1434, lng:-117.1661
  },
  {
    id:'stitchit-online',
    name:'Stitch It International — Online',
    website:'https://www.stitchitintl.com',
    phone:'866-333-2415',
    type:'online',
    certs:['single','multi'],
    // St. Louis, MO (city center)
    city:'St. Louis', state:'MO', address:'Online Dealer (city center pin)',
    lat:38.6270, lng:-90.1994
  },

  // ========== RETAIL ==========
  // Sewing Machines Plus (Retail)
  {
    id:'smp-san-marcos',
    name:'Sewing Machines Plus — San Marcos, CA',
    website:'https://www.sewingmachinesplus.com',
    phone:'760-739-8222',
    type:'retail',
    address:'713 Center Dr, San Marcos, CA 92069',
    city:'San Marcos', state:'CA',
    lat:33.1434, lng:-117.1661,
    certs:['single']
  },

  // Topps — Florida
  { id:'topps-boca', name:'Topps Vacuum & Sewing — Boca Raton, FL', website:'https://www.toppsvacuumandsewing.com', phone:'561-672-1709', type:'retail', address:'8177 Glades Rd Ste 7, Boca Raton, FL 33434', city:'Boca Raton', state:'FL', lat:26.3683, lng:-80.1289, certs:['single'] },
  { id:'topps-brandon', name:'Topps Vacuum & Sewing — Brandon, FL', website:'https://www.toppsvacuumandsewing.com', phone:'813-689-5257', type:'retail', address:'112 E Brandon Blvd, Brandon, FL 33511', city:'Brandon', state:'FL', lat:27.9378, lng:-82.2859, certs:['single'] },
  { id:'topps-fort-myers', name:'Topps Vacuum & Sewing — Fort Myers, FL', website:'https://www.toppsvacuumandsewing.com', phone:'239-936-3231', type:'retail', address:'12135 S Cleveland Ave, Fort Myers, FL 33907', city:'Fort Myers', state:'FL', lat:26.6406, lng:-81.8723, certs:['single'] },
  { id:'topps-lakewood', name:'Topps Vacuum & Sewing — Lakewood Ranch (Bradenton), FL', website:'https://www.toppsvacuumandsewing.com', phone:'941-251-5226', type:'retail', address:'7212 55th Ave E, Bradenton, FL 34203', city:'Bradenton', state:'FL', lat:27.4342, lng:-82.4593, certs:['single'] },
  { id:'topps-largo', name:'Topps Vacuum & Sewing — Largo, FL', website:'https://www.toppsvacuumandsewing.com', phone:'727-585-6676', type:'retail', address:'12495 Seminole Blvd, Largo, FL 33778', city:'Largo', state:'FL', lat:27.9095, lng:-82.7873, certs:['single'] },
  { id:'topps-naples', name:'Topps Vacuum & Sewing — Naples, FL', website:'https://www.toppsvacuumandsewing.com', phone:'239-591-4422', type:'retail', address:'5367 Airport Pulling Rd N, Naples, FL 34109', city:'Naples', state:'FL', lat:26.1420, lng:-81.7948, certs:['single'] },
  { id:'topps-palm-harbor', name:'Topps Vacuum & Sewing — Palm Harbor, FL', website:'https://www.toppsvacuumandsewing.com', phone:'727-787-7043', type:'retail', address:'#215, 3327 Tampa Rd, Palm Harbor, FL 34684', city:'Palm Harbor', state:'FL', lat:28.0781, lng:-82.7637, certs:['single'] },
  { id:'topps-pembroke', name:'Topps Vacuum & Sewing — Pembroke Pines, FL', website:'https://www.toppsvacuumandsewing.com', phone:'954-431-3552', type:'retail', address:'10826 Pines Blvd, Pembroke Pines, FL 33026', city:'Pembroke Pines', state:'FL', lat:26.0032, lng:-80.2239, certs:['single'] },
  { id:'topps-port-charlotte', name:'Topps Vacuum & Sewing — Port Charlotte, FL', website:'https://www.toppsvacuumandsewing.com', phone:'941-766-7118', type:'retail', address:'3846 Tamiami Trail, Port Charlotte, FL 33952', city:'Port Charlotte', state:'FL', lat:26.9762, lng:-82.0906, certs:['single'] },
  { id:'topps-sarasota', name:'Topps Vacuum & Sewing — Sarasota, FL', website:'https://www.toppsvacuumandsewing.com', phone:'941-926-2699', type:'retail', address:'2120 Bee Ridge Road, Sarasota, FL 34239', city:'Sarasota', state:'FL', lat:27.3364, lng:-82.5307, certs:['single'] },
  { id:'topps-tampa', name:'Topps Vacuum & Sewing — Tampa, FL', website:'https://www.toppsvacuumandsewing.com', phone:'813-963-6732', type:'retail', address:'14922 Dale Mabry Hwy #6, Tampa, FL 33618', city:'Tampa', state:'FL', lat:28.0887, lng:-82.4946, certs:['single'] },

  // Topps — Texas
  { id:'topps-plano', name:'Topps Vacuum & Sewing — Plano, TX', website:'https://www.toppsvacuumandsewing.com', phone:'214-440-2207', type:'retail', address:'700 Alma Dr #106, Plano, TX 75075', city:'Plano', state:'TX', lat:33.0198, lng:-96.6989, certs:['single'] },
  { id:'topps-houston', name:'Topps Vacuum & Sewing — Houston, TX', website:'https://www.toppsvacuumandsewing.com', phone:'713-814-5121', type:'retail', address:'3727 Westheimer Rd, Houston, TX 77027', city:'Houston', state:'TX', lat:29.7420, lng:-95.4550, certs:['single'] },
];

const q = document.getElementById('dealerSearch');
const t = document.getElementById('dealerType');
const c = document.getElementById('dealerCert');
const s = document.getElementById('dealerSort');
const groupsHost = document.getElementById('dealerGroups');
const countEl = document.getElementById('dealerCount');
const clearBtn = document.getElementById('dealerClear');
const locBtn = document.getElementById('useLocation');
const mapBtn = document.getElementById('toggleMap');
const mapPane = document.getElementById('mapPane');

let userPos = null;
let map, markerLayer;

/* Helpers */
const hasGeo = d => typeof d.lat === 'number' && typeof d.lng === 'number';
const km = m => (m/1000).toFixed(1);
function haversine(a, b) {
  const toRad = v => v*Math.PI/180, R=6371000;
  const dLat = toRad(b.lat-a.lat), dLng = toRad(b.lng-a.lng);
  const lat1 = toRad(a.lat), lat2 = toRad(b.lat);
  const h = Math.sin(dLat/2)**2 + Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLng/2)**2;
  return 2*R*Math.asin(Math.sqrt(h));
}

/* Render a single dealer card */
function card(d){
  const certTags = (d.certs||[]).map(cc => `<span class="dealer-chip ${cc==='single'?'single':'multi'}">${cc==='single'?'Single Head':'Multi-Head'} Certified</span>`).join(' ');
  const typeTag = d.type==='online' ? `<span class="badge-online">Online</span>` : `<span class="badge-online">Retail</span>`;
  const addr = d.address ? `<div>${d.address}</div>` : '';
  const cityst = (d.city||d.state) ? `<div>${[d.city,d.state].filter(Boolean).join(', ')}</div>` : '';
  const dist = (userPos && hasGeo(d)) ? `<span class="dealer-chip">~${km(haversine(userPos, d))} km</span>` : '';
  return `
    <div class="dealer-item" data-type="${d.type}" data-cert="${(d.certs||[]).join(' ')}" data-search="${(d.name+' '+(d.address||'')+' '+(d.city||'')+' '+(d.state||'')+' '+(d.phone||'')).toLowerCase()}">
      <h3>${d.name}</h3>
      <div class="dealer-meta">
        ${typeTag}
        ${d.state ? `<span class="dealer-chip">${d.state}</span>`:''}
        ${certTags}
        ${dist}
      </div>
      <div class="p-muted" style="margin-top:6px">
        ${addr || cityst}
        ${d.phone ? `<div>☎ ${d.phone}</div>`:''}
      </div>
      <div class="dealer-actions">
        ${d.website ? `<a class="btn btn-outline" href="${d.website}" target="_blank" rel="noopener">Website</a>`:''}
        ${d.phone ? `<a class="btn btn-primary" href="tel:${d.phone}">Call ${d.phone}</a>`:''}
        ${hasGeo(d) ? `<a class="btn btn-outline" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d.name+' '+(d.address||''))}" target="_blank" rel="noopener">Open in Maps</a>`:''}
      </div>
    </div>
  `;
}

/* Filtering + sorting */
function currentFiltered(){
  const qv = (q.value||'').toLowerCase();
  const tv = t.value;
  const cv = c.value;
  let list = dealers.filter(d => {
    const typeOk = !tv || d.type===tv;
    const certOk = !cv || (d.certs||[]).includes(cv);
    const qOk = !qv || (d.name+' '+(d.address||'')+' '+(d.city||'')+' '+(d.state||'')+' '+(d.phone||'')).toLowerCase().includes(qv);
    return typeOk && certOk && qOk;
  });

  // sort
  const sv = s.value;
  if (sv==='alpha') {
    list.sort((a,b)=> a.name.localeCompare(b.name));
  } else if (sv==='nearest' && userPos) {
    list.sort((a,b)=>{
      const da = hasGeo(a) ? haversine(userPos,a) : Infinity;
      const db = hasGeo(b) ? haversine(userPos,b) : Infinity;
      return da - db;
    });
  } else {
    // default alpha
    list.sort((a,b)=> a.name.localeCompare(b.name));
  }
  return list;
}

/* Render list + count */
function renderList(){
  const list = currentFiltered();
  countEl.textContent = list.length;
  if (!list.length){
    groupsHost.innerHTML = `<div class="empty-state">No dealers match your filters.</div>`;
  } else {
    groupsHost.innerHTML = list.map(card).join('');
  }
  updateMap(list);
}

/* Map setup */
function ensureMap(){
  if (map) return;
  map = L.map('dealerMap', { zoomControl:true, minZoom:3 }).setView([39.5,-98.35], 4);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19, attribution: '&copy; OpenStreetMap'
  }).addTo(map);
  markerLayer = L.layerGroup().addTo(map);
}

function updateMap(list){
  if (!mapPane || mapPane.classList.contains('map-hidden')) return;
  ensureMap();
  markerLayer.clearLayers();

  const pts = list.filter(hasGeo);
  const markers = pts.map(d => {
    const m = L.marker([d.lat, d.lng]).bindPopup(
      `<strong>${d.name}</strong><br>${d.address ? d.address+'<br>':''}${[d.city,d.state].filter(Boolean).join(', ')}${d.phone ? `<br><a href="tel:${d.phone}">${d.phone}</a>`:''}`
    );
    m.addTo(markerLayer);
    return m;
  });

  // user location indicator
  if (userPos){
    L.circleMarker([userPos.lat,userPos.lng], { radius:6, weight:2 }).addTo(markerLayer).bindPopup('You');
  }

  if (markers.length){
    const group = L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));
  } else {
    map.setView([39.5,-98.35], 4);
  }
}

/* Geolocation */
function isSecure(){ return location.protocol==='https:' || location.hostname==='localhost'; }
locBtn?.addEventListener('click', ()=>{
  if (!isSecure()){ alert('Geolocation requires HTTPS (or localhost).'); return; }
  if (!('geolocation' in navigator)){ alert('Geolocation is not available in this browser.'); return; }
  navigator.geolocation.getCurrentPosition(
    pos => { userPos = { lat:pos.coords.latitude, lng:pos.coords.longitude }; s.value='nearest'; renderList(); },
    err => {
      const reason = ({1:'Permission denied',2:'Position unavailable',3:'Timeout'})[err.code] || 'Unknown error';
      alert(`Could not get your location (${reason}). If you denied the prompt, allow location access and try again.`);
    },
    { enableHighAccuracy:true, timeout:10000, maximumAge:60000 }
  );
});

/* Map toggle */
mapBtn?.addEventListener('click', ()=>{
  const on = mapPane.classList.toggle('map-hidden');
  mapPane.setAttribute('aria-hidden', on ? 'true':'false');
  mapBtn.setAttribute('aria-pressed', (!on).toString());
  mapBtn.textContent = on ? '🗺️ Show Map' : '🗺️ Hide Map';
  if (!on){
    setTimeout(()=>{
      ensureMap(); map.invalidateSize(); updateMap(currentFiltered());
    },0);
  }
});

/* Filters */
[q,t,c,s].forEach(el => el?.addEventListener('input', renderList));
clearBtn?.addEventListener('click', ()=>{
  q.value=''; t.value=''; c.value=''; s.value='alpha'; userPos=null; renderList();
});

/* Init */
renderList();
</script>

</body>
</html>



































